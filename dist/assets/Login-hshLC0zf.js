import{r as u,c as l,a as s,w as f,b as w,d,v as p,t as h,e as v,f as k,g as y,h as b,u as x,o as r}from"./index-DrpxvrEV.js";import{_ as V,a as m}from"./_plugin-vue_export-helper-CKiEZOlW.js";import"./api-BAtoe7S3.js";const N={class:"auth-container"},S={class:"auth-form"},B={class:"input-row"},C={class:"form-group"},L={class:"form-group"},q={key:0,class:"error-message"},D=["disabled"],I={key:0},M={key:1},T={class:"switch-auth"},U={__name:"Login",setup(E){const t=u({username:"",password:""}),a=u(!1),n=u(""),_=x(),c=async()=>{a.value=!0,n.value="";try{const o=await m.login(t.value);o.data.token&&(localStorage.setItem("user-token",o.data.token),await m.login(t.value),console.log("登录成功，准备跳转"),await _.push("/"),console.log("已调用 push"))}catch(o){n.value=o.response?.data?.message||"用户名或密码错误。",a.value=!1}};return(o,e)=>{const g=b("router-link");return r(),l("div",N,[e[7]||(e[7]=s("h1",{class:"page-title"},"体育活动室",-1)),s("div",S,[e[6]||(e[6]=s("h2",null,"登录您的账户",-1)),s("form",{onSubmit:f(c,["prevent"])},[s("div",B,[s("div",C,[e[2]||(e[2]=s("label",null,"用户名",-1)),d(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>t.value.username=i),required:""},null,512),[[p,t.value.username]])]),s("div",L,[e[3]||(e[3]=s("label",null,"密码",-1)),d(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>t.value.password=i),required:""},null,512),[[p,t.value.password]])])]),n.value?(r(),l("div",q,h(n.value),1)):w("",!0),s("button",{type:"submit",disabled:a.value},[a.value?(r(),l("span",I,"登录中...")):(r(),l("span",M,"登录"))],8,D)],32),s("div",T,[s("p",null,[e[5]||(e[5]=v("还没有账户？ ",-1)),k(g,{to:"/register"},{default:y(()=>e[4]||(e[4]=[v("立即注册",-1)])),_:1,__:[4]})])])])])}}},A=V(U,[["__scopeId","data-v-dcca1d39"]]);export{A as default};
